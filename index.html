<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Haagen-Dazs Main</title>

    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/slider.css">

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.js"></script>
</head>

<body>
    <div class="dot-nav">
        <button class="dot active" data-target="header"></button>
        <button class="dot" data-target="menu"></button>
        <button class="dot" data-target="store_menu"></button>
        <button class="dot" data-target="sns_warp"></button>
        <button class="dot" data-target="footer"></button>
    </div>

    <header>
        <div class="nav_warp">
            <div class="nav_back">
                <div class="nav">
                    <h1>
                        <a href="index.html"><img src="image/logo_02_ft.png" class="logo-default" alt="Haagen-Dazs"></a>
                        <a href="index.html"><img src="image/logo_02.png" class="logo-scrolled" alt="Haagen-Dazs"></a>
                    </h1>

                    <ul class="gnb">
                        <li>
                            <a href="#" class="gnb_title">Brand</a>
                            <ul class="dropdown-nav">
                                <li><a href="sub_02.html">소개</a></li>
                                <li><a href="">연혁</a></li>
                                <li><a href="">BI</a></li>
                                <li><a href="">매장안내</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="sub_01.html" class="gnb_title">Menu</a>
                            <ul class="dropdown-nav">
                                <li><a href="sub_01.html#online">온라인스토어</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">컵 아이스크림</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">바 아이스크림</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">샌드&콘 아이스크림</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">아이스크림 케이크</a></li>
                                <li><a href="sub_01.html#offline">오프라인 스토어</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#offline">크리에이션 메뉴</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#offline">아이스크림 드링크</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="gnb_title">Online Shop</a>
                            <ul class="dropdown-nav">
                                <li><a href="">컵 아이스크림</a></li>
                                <li><a href="">바 아이스크림</a></li>
                                <li><a href="">샌드&콘 아이스크림</a></li>
                                <li><a href="">아이스크림 케이크</a></li>
                                <li><a href="">배송공지</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="gnb_title">News</a>
                            <ul class="dropdown-nav">
                                <li><a href="#">이벤트</a></li>
                                <li><a href="#">공지사항</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="gnb_title">B2B</a>
                            <ul class="dropdown-nav">
                                <li><a href="#">비즈니스 파트너</a></li>
                            </ul>
                        </li>
                    </ul>

                    <p>
                        <a href="" class="login">login</a>
                        <a href="" class="hamburger" aria-label="모바일 메뉴 열기"><img src="image/hamburger.png" alt=""></a>
                    </p>

                    <div class="mobile-menu">
                        <ul class="gnb-mobile"></ul>
                    </div>
                </div>
                <div class="menu-overlay"></div>
            </div>
        </div>

        <script>
            $(window).on("load", function () {
                const gnbHtml = $(".gnb").html();
                if (gnbHtml) $(".gnb-mobile").html(gnbHtml);

                $(".hamburger").off("click").on("click", function (e) {
                    e.preventDefault();
                    $(".mobile-menu, .menu-overlay").toggleClass("active");
                    $(this).toggleClass("active");
                });

                $(".menu-overlay").off("click").on("click", function () {
                    $(".mobile-menu, .menu-overlay, .hamburger").removeClass("active");
                });

                $(document).off("click", ".gnb-mobile .gnb_title").on("click", ".gnb-mobile .gnb_title", function (e) {
                    e.preventDefault();
                    const parentLi = $(this).closest("li");
                    if (parentLi.hasClass("active")) {
                        parentLi.removeClass("active");
                    } else {
                        $(".gnb-mobile li.active").removeClass("active");
                        parentLi.addClass("active");
                    }
                });
            });
        </script>

        <div class="video-wrap">
            <iframe class="video"
                src="https://player.vimeo.com/video/1071707544?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&background=1"
                allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
                referrerpolicy="strict-origin-when-cross-origin" title="(HS)하겐다즈_리테일_스틱바영상 tvcf용 0220(mp4)" loading="lazy"></iframe>
        </div>
    </header>
    
    <main>
        <div class="menu" id="menu">
            <div class="menu_warp">
                <h2>HaagenDazs Menu</h2>
                <ul class="menu_bar">
                    <li class="active"><span>Cup Icecream</span></li>
                    <li><span>Bar Icecream</span></li>
                    <li><span>Sand&Cone</span></li>
                    <li><span>Cake</span></li>
                </ul>
                <ul class="menu_list">
                    <li id="cup01"><img src="image/cup_01.png" alt=""></li>
                    <li><img src="image/cup_02.png" alt=""></li>
                    <li><img src="image/cup_03.png" alt=""></li>
                    <li><img src="image/cup_04.png" alt=""></li>
                    <li><img src="image/cup_05.png" alt=""></li>
                </ul>
                <a href="sub_01.html#online">
                    <p>more <img src="image/circle.png" alt=""></p>
                </a>
            </div>
        </div>
    
        <div class="modal" id="productModal">
            <div class="modal__overlay" id="overlay"></div>
            <div class="modal__box">
                <button class="modal__close" id="closeBtn">✕</button>
        
                <div class="modal__imgwrap">
                    <img src="image/cup_01.png" alt="하겐다즈 쿠키앤그린티 아이스크림">
                </div>
        
                <div class="modal__content">
                    <h3>하겐다즈 쿠키앤그린티 (미니컵) 100ml</h3>
                    <p>Cookies & Green Tea Ice Cream</p>
                    <p>압도적 함량의 Real 쿠키와 최상급 그린티의 우아한 만남!</p>

                    <div class="modal__allergy">
                        <span></span><p>알레르기 유발 성분 : 우유, 계란, 밀 함유</p>
                    </div>
        
                    <table class="nutri-table">
                        <thead>
                            <tr>
                                <th>구분</th>
                                <th>1회 제공량</th>
                                <th>기준치</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>열량</td>
                                <td>230 kcal</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>나트륨</td>
                                <td>70 mg</td>
                                <td>4%</td>
                            </tr>
                            <tr>
                                <td>탄수화물</td>
                                <td>22 g</td>
                                <td>7%</td>
                            </tr>
                            <tr>
                                <td>당류</td>
                                <td>19 g</td>
                                <td>19%</td>
                            </tr>
                            <tr>
                                <td>지방</td>
                                <td>14 g</td>
                                <td>26%</td>
                            </tr>
                            <tr>
                                <td>포화지방</td>
                                <td>9 g</td>
                                <td>60%</td>
                            </tr>
                            <tr>
                                <td>콜레스테롤</td>
                                <td>70 mg</td>
                                <td>23%</td>
                            </tr>
                            <tr>
                                <td>단백질</td>
                                <td>4 g</td>
                                <td>7%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    
        <script>
            // 메뉴 탭 active 유지
            document.querySelectorAll(".menu_bar").forEach(list => {
                list.addEventListener("click", e => {
                    const li = e.target.closest("li");
                    if (!li) return;
                    list.querySelectorAll("li").forEach(el => el.classList.remove("active"));
                    li.classList.add("active");
                });
            });

            // ✅ id 이름 맞춘 cup01 클릭 시 모달 열기
            document.getElementById("cup01").onclick = function () {
                document.getElementById("productModal").classList.add("show");
            };

            // 닫기 버튼과 오버레이 클릭 시 닫기
            document.getElementById("overlay").onclick = closeModal;
            document.getElementById("closeBtn").onclick = closeModal;

            function closeModal() {
                document.getElementById("productModal").classList.remove("show");
            }
        </script>

        <div class="store_menu" id="store_menu">
            <div class="store_menu_warp">
                <h2>Store Menu</h2>
                <ul class="store_menu_bar">
                    <li class="active"><span>Creation Menu</span></li>
                    <li><span>Icecream Drink</span></li>
                </ul>
                <ul class="store_menu_list">
                    <li><img src="image/dessert_01.png" alt=""></li>
                    <li><img src="image/dessert_02.png" alt=""></li>
                    <li><img src="image/dessert_04.png" alt=""></li>
                    <li><img src="image/dessert_03.png" alt=""></li>
                </ul>
                <a href="sub_01.html#offline">
                    <p>more<img src="image/circle.png" alt=""></p>
                </a>
            </div>

            <script>
                menuItems.forEach(item => {
                    item.addEventListener("click", () => {
                        menuItems.forEach(i => i.classList.remove("active"));
                        item.classList.add("active");
                    });
                });
            </script>

            <div class="store_info_warp">
                <div class="store_info">
                    <h2><a href="sub_02.html">Store Info</a></h2>
                    <ul class="store_info_list">
                        <li>여의도점</li>
                        <li>분당미금점</li>
                        <li>서초점</li>
                        <li>부산마린시티점</li>
                        <li>판교점</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="sns_warp" id="sns_warp">
            <div class="sns">
                <div class="slider_controls">
                    <button id="prev"><img src="image/arrow_left.png" width="42" height="42" alt="prev"></button>
                    <h2>HaagenDazs News</h2>
                    <button href="" id="next"><img src="image/arrow_right.png" width="42" height="42" alt="next"></button>
                </div>

                <div class="slider4">
                    <div>
                        <img src="image/sns_01.png" alt="">
                        <div class="silder_text">
                            <h3 class="slider_main_text_red">NEW 하겐다즈 리얼블랑 베리</h3>
                            <p>최상급 딸기 과육이 가득한 스트로베리 아이스크림과 5가지 순수한 원재료로 만든 바닐라 아이스크림의 완벽한 조화</p>
                        </div>
                    </div>
                    <div>
                        <img src="image/sns_02.png" alt="">
                        <div class="silder_text">
                            <h3 class="slider_main_text_green">NEW 바닐라 그린티 가든 케이크</h3>
                            <p>순수한 다섯가지 원재료 리얼 바닐라 아이스크림과 달콤 쌉싸름한 그린티가 만나 하겐다즈 BEST 조합!</p>
                        </div>
                    </div>
                    <div>
                        <img src="image/sns_03.png" alt="">
                        <div class="silder_text">
                            <h3 class="slider_main_text_red">NEW 쿠키&초콜릿 쿠키 컬렉션</h3>
                            <p>모두가 사랑하는 하겐다즈 초콜릿 아이스크림과 바삭한 리얼 쿠키의 완벽한 조화</p>
                        </div>
                    </div>
                    <div>
                        <img src="image/sns_04.png" alt="">
                        <div class="silder_text">
                            <h3 class="slider_main_text_green">NEW 쿠키&그린티 쿠키 컬렉션</h3>
                            <p>엄선된 최상급 찻잎의 깊은 풍미를 담은 그린티 아이스크림에 바삭한 리얼 쿠키 조각 가득</p>
                        </div>
                    </div>
                    <div>
                        <img src="image/sns_05.png" alt="">
                        <div class="silder_text">
                            <h3 class="slider_main_text_red">NEW 딸기 초코 조각 모둠 케이크</h3>
                            <p>미리 컷팅된 8개의 조각으로 자를 걱정 없이 언제 어디서나 깔끔하게!</p>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                $(window).on('load', function () {
                    function getSlideWidth() {
                        const winW = $(window).width();
                        if (winW <= 480) return 300;
                        if (winW <= 768) return 340;
                        if (winW <= 1200) return 380;
                        if (winW <= 1600) return 430;
                        return 480;
                    }

                    // 이미지 다 불러온 다음 초기화
                    let slider = $('.slider4').bxSlider({
                        auto: true,
                        autoControls: false,
                        slideWidth: getSlideWidth(),
                        maxSlides: 5,
                        moveSlides: 1,
                        slideMargin: 30,
                        pager: false,
                        controls: false
                    });

                    $('#next').on('click', function () {
                        slider.goToNextSlide();
                    });
                    $('#prev').on('click', function () {
                        slider.goToPrevSlide();
                    });

                    // 브라우저 리사이즈 시 슬라이드 다시 계산
                    let resizeTimer;
                    $(window).on('resize', function () {
                        clearTimeout(resizeTimer);
                        resizeTimer = setTimeout(function () {
                            slider.reloadSlider({
                                auto: true,
                                autoControls: false,
                                slideWidth: getSlideWidth(),
                                maxSlides: 5,
                                moveSlides: 1,
                                slideMargin: 30,
                                pager: false,
                                controls: false
                            });
                        }, 200);
                    });
                });
            </script>
        </div>
    </main>

    <script>
        const menuBarItems = document.querySelectorAll('.menu_bar li');
        menuBarItems.forEach(item => {
            item.addEventListener('click', () => {
                menuBarItems.forEach(el => el.classList.remove('active'));
                item.classList.add('active');
            });
        });
        const storeMenuItems = document.querySelectorAll('.store_menu_bar li');
        storeMenuItems.forEach(item => {
            item.addEventListener('click', () => {
                storeMenuItems.forEach(el => el.classList.remove('active'));
                item.classList.add('active');
            });
        });
    </script>

    <footer id="footer">
        <div class="footer">
            <h1><a href="index.html"><img src="image/logo_01.png" alt=""></a></h1>
            <h1><a href="index.html"><img src="image/logo_02_ft.png" alt=""></a></h1>
            <div class="footer_warp">
                <ul class="footer_list_01">
                    <li>개인정보처리방침</li>
                    <li>이용약관</li>
                    <li>이메일무단수집거부</li>
                </ul>
                <ul class="footer_list_02">
                    <li>한국하겐-다즈(주) 대표 : 김미조</li>
                    <li>주소 : 서울특별시 강남구 테헤란로 311 (역삼동, 아남타워 6층) | 사업자등록번호 : 106-81-28964</li>
                    <li>통신판매신고 : 강남-8186 | 대표전화 : 02-508-8500 | 개인정보관리책임자 : 김미조 대표</li>
                </ul>
                <ul class="footer_list_03">
                    <li>주식회사 에스와이피글로벌 대표 : 김광용 (사업자정보확인)</li>
                    <li>주소 : 서울특별시 강남구 봉은사로112길 26길, 5층 502호 (삼성동, 한호빌딩) | 사업자등록번호 : 262-88-00829</li>
                    <li>통신판매신고 : 2018-서울강남-00403 | 대표전화 : 070-7549-7020 | Email : cs@unitoa | 개인정보관리책임자 : 조현정</li>
                </ul>
                <p>© 2025 General Mills. All Rights Reserved.</p>
            </div>
        </div>

        <a id="topBtn" href="#"><img src="image/arrow_top.png" alt="">
            <p>Top</p>
        </a>
    </footer>

    <script>
        $(function () {
            $(window).scroll(function () {
                if ($(this).scrollTop() > 250) {
                    $('#topBtn').fadeIn();
                } else {
                    $('#topBtn').fadeOut();
                }
            });
            $("#topBtn").click(function () {
                $('html, body').animate({ scrollTop: 0 }, 400);
                return false;
            });
        });
    </script>

    <script src="https://player.vimeo.com/api/player.js"></script>

    <script>
        (function () {
            const nav = document.querySelector('.nav_warp');
            const header = document.querySelector('header');
            if (!nav || !header) return;

            const io = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        nav.classList.remove('shrink');
                    } else {
                        nav.classList.add('shrink');
                    }
                });
            }, { root: null, threshold: 0.1 });

            io.observe(header);

            window.addEventListener('load', () => {
                const rect = header.getBoundingClientRect();
                if (rect.bottom <= 0) nav.classList.add('shrink');
                else nav.classList.remove('shrink');
            });
        })();
    </script>

    <script>
        const sections = document.querySelectorAll('header, .menu, .store_menu, .sns_warp, footer');
        const dots = document.querySelectorAll('.dot-nav .dot');

        function activateDot(index) {
            dots.forEach((dot, i) => { dot.classList.toggle('active', i === index); });
        }

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const visibleIndex = Array.from(sections).indexOf(entry.target);
                    activateDot(visibleIndex);
                }
            });
        }, { threshold: 0.4, rootMargin: '-20% 0px -20% 0px' });

        sections.forEach(section => observer.observe(section));
        dots.forEach((dot, i) => dot.addEventListener('click', () => {
            sections[i].scrollIntoView({ behavior: 'smooth' });
        }));
    </script>
</body>

</html>