<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/sub_01.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <title>Haagen-Dazs Menu</title>
</head>

<body>
    <header>
        <div class="nav_warp">
            <div class="nav_back">
                <div class="nav">
                    <h1>
                        <a href="index.html"><img src="image/logo_02_ft.png" class="logo-default"alt="logo default"></a>
                        <a href="index.html"><img src="image/logo_02.png" class="logo-scrolled"alt="logo scrolled"></a>
                    </h1>
                    <ul class="gnb">
                        <li>
                            <a href="#" class="gnb_title">Brand</a>
                            <ul class="dropdown-nav">
                                <li><a href="sub_02.html">소개</a></li>
                                <li><a href="">연혁</a></li>
                                <li><a href="">BI</a></li>
                                <li><a href="">매장안내</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="sub_01.html#online" class="gnb_title">Menu</a>
                            <ul class="dropdown-nav">
                                <li><a href="sub_01.html#online">온라인스토어</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">컵 아이스크림</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">바 아이스크림</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">샌드&콘 아이스크림</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#online">아이스크림 케이크</a></li>
                                <li><a href="sub_01.html#offline">오프라인 스토어</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#offline">크리에이션 메뉴</a></li>
                                <li class="dropdown-sub"><a href="sub_01.html#offline">아이스크림 드링크</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="gnb_title">Online Shop</a>
                            <ul class="dropdown-nav">
                                <li><a href="">컵 아이스크림</a></li>
                                <li><a href="">바 아이스크림</a></li>
                                <li><a href="">샌드&콘 아이스크림</a></li>
                                <li><a href="">아이스크림 케이크</a></li>
                                <li><a href="">배송공지</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="gnb_title">News</a>
                            <ul class="dropdown-nav">
                                <li><a href="#">이벤트</a></li>
                                <li><a href="#">공지사항</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" class="gnb_title">B2B</a>
                            <ul class="dropdown-nav">
                                <li><a href="#">비즈니스 파트너</a></li>
                            </ul>
                        </li>
                    </ul>
                    <p>
                        <a href="" class="login">login</a>
                        <a href="#" class="hamburger" aria-label="메뉴 열기" aria-expanded="false"><img src="image/hamburger.png" alt="menu"></a>
                    </p>
                    <div class="mobile-menu" aria-hidden="true">
                        <ul class="gnb-mobile"></ul>
                    </div>
                </div>
                <div class="menu-overlay" aria-hidden="true"></div>
            </div>
        </div>
        <div class="visual">
            <h2>Menu</h2>
            <img src="image/visual_01.png" alt="visual">
        </div>
    </header>

    <main>
        <div class="store_sellect">
            <ul class="store_sellect_warp">
                <li class="online active" id="online"><a href="#">Online Store</a></li>
                <li class="offline" id="offline"><a href="#">Offline Store</a></li>
            </ul>
        </div>

        <div class="Menu_sellect online_category">
            <ul class="Menu_sellect_warp">
                <li class="cup_menu active"><a href="#">Cup <p>Icecream</p></a></li>
                <li class="bar_menu"><a href="#">Bar <p>Icecream</p></a></li>
                <li class="sand_menu"><a href="#">Sand&Cone <p>Icecream</p></a></li>
                <li class="cake_menu"><a href="#">
                        <p>Icecream</p> Cake
                    </a></li>
            </ul>
        </div>

        <div class="Menu_sellect offline_category" style="display:none;">
            <ul class="Menu_sellect_warp">
                <li class="creation_menu active"><a href="#">Creation Menu</a></li>
                <li class="drink_menu"><a href="#">Icecream Drink</a></li>
            </ul>
        </div>

        <div class="Menu_list online_menu">
            <div class="menu_list_warp">
                <ul class="cup_Icecream_menu" id="cup">
                    <li><a href="#"><img src="image/cup_04.png" alt="쿠키 앤 초콜릿 파인트">
                            <p>쿠키 앤 초콜릿 [파인트]</p>
                        </a></li>
                    <li><a href="#"><img src="image/cup_05.png" alt="쿠키 앤 그린티 파인트">
                            <p>쿠키 앤 그린티 [파인트]</p>
                        </a></li>
                    <li class="cup_small"><a href="#"><img src="image/cup_01.png" alt="쿠키 앤 그린티 미니컵">
                            <p>쿠키 앤 그린티 [미니컵]</p>
                        </a></li>
                    <li class="cup_small"><a href="#"><img src="image/cup_02.png" alt="마드리드 츄로스 미니컵">
                            <p>마드리드 츄로스 [미니컵]</p>
                        </a></li>
                    <li class="cup_small"><a href="#"><img src="image/cup_03.png" alt="로마 티라미수 미니컵">
                            <p>로마 티라미수 [미니컵]</p>
                        </a></li>
                    <li><a href="#"><img src="image/cup_08.png" alt="마드리드 츄로스 파인트">
                            <p>마드리드 츄로스 [파인트]</p>
                        </a></li>
                    <li><a href="#"><img src="image/cup_07.png" alt="로마 티라미수 파인트">
                            <p>로마 티라미수 [파인트]</p>
                        </a></li>
                    <li><a href="#"><img src="image/cup_06.png" alt="블루베리 앤 크림 파인트">
                            <p>블루베리 앤 크림 [파인트]</p>
                        </a></li>
                </ul>
            </div>
            <div class="number">
                <ul>
                    <li><a href="#"><img src="image/arrow_left_small.png" alt=""></a></li>
                    <li><a href="#"><b>1</b></a></li>
                    <li class="small_number"><a href="#">2</a></li>
                    <li class="small_number"><a href="#">3</a></li>
                    <li><a href="#"><img src="image/arrow_right_small.png" alt=""></a></li>
                </ul>
            </div>
        </div>

        <div class="Menu_list offline_menu" style="display:none;">
            <div class="menu_list_warp">
                <ul class="creation_menu_list" id="creation">
                    <li class="img_small"><a href="#"><img src="image/dessert_01.png" alt="쿠키&크림 파르페 크런치">
                            <p>쿠키&크림 파르페 크런치</p>
                        </a></li>
                    <li class="img_small"><a href="#"><img src="image/dessert_02.png" alt="요거트 파르페 크런치">
                            <p>요거트 파르페 크런치</p>
                        </a></li>
                    <li class="img_small"><a href="#"><img src="image/dessert_04.png" alt="소이 빈 파르페 크런치">
                            <p>소이 빈 파르페 크런치</p>
                        </a></li>
                    <li><a href="#"><img src="image/dessert_03.png" alt="와플 드림">
                            <p>와플 드림</p>
                        </a></li>
                </ul>
            </div>
            <div class="number">
                <ul>
                    <li><a href=""><img src="image/arrow_left_small.png" alt=""></a></li>
                    <li><b>1</b></li>
                    <li><img src="image/arrow_right_small.png" alt=""></li>
                </ul>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer">
            <h1><a href="index.html"><img src="image/logo_01.png" alt="logo"></a></h1>
            <h1><a href="index.html"><img src="image/logo_02_ft.png" alt="logo alt"></a></h1>
            <div class="footer_warp">
                <ul class="footer_list_01">
                    <li>개인정보처리방침</li>
                    <li>이용약관</li>
                    <li>이메일무단수집거부</li>
                </ul>
                <ul class="footer_list_02">
                    <li>한국하겐-다즈(주) 대표 : 김미조</li>
                    <li>주소 : 서울특별시 강남구 테헤란로 311 (역삼동, 아남타워 6층) | 사업자등록번호 : 106-81-28964</li>
                    <li>통신판매신고 : 강남-8186 | 대표전화 : 02-508-8500 | 개인정보관리책임자 : 김미조 대표</li>
                </ul>
                <ul class="footer_list_03">
                    <li>주식회사 에스와이피글로벌 대표 : 김광용 (사업자정보확인)</li>
                    <li>주소 : 서울특별시 강남구 봉은사로112길 26길, 5층 502호 (삼성동, 한호빌딩) | 사업자등록번호 : 262-88-00829</li>
                    <li>통신판매신고 : 2018-서울강남-00403 | 대표전화 : 070-7549-7020 | Email : cs@unitoa | 개인정보관리책임자 : 조현정</li>
                </ul>
                <p>© 2025 General Mills. All Rights Reserved.</p>
            </div>
        </div>
        <a id="topBtn" href="#" aria-label="상단으로"><img src="image/arrow_top.png" alt="top">
            <p>Top</p>
        </a>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            /* ===== 공통 엘리먼트 ===== */
            const nav = document.querySelector('.nav_warp');
            const headerEl = document.querySelector('header');

            const gnb = document.querySelector('.gnb');
            const gnbMobile = document.querySelector('.gnb-mobile');

            const hamburger = document.querySelector('.hamburger');
            const mobileMenu = document.querySelector('.mobile-menu');
            const overlay = document.querySelector('.menu-overlay');

            const storeBtns = document.querySelectorAll('.store_sellect_warp li');
            const onlineCategory = document.querySelector('.online_category');
            const offlineCategory = document.querySelector('.offline_category');
            const onlineMenu = document.querySelector('.online_menu');
            const offlineMenu = document.querySelector('.offline_menu');

            const onlineMenus = onlineMenu ? onlineMenu.querySelectorAll('.menu_list_warp ul') : [];
            const offlineMenus = offlineMenu ? offlineMenu.querySelectorAll('.menu_list_warp ul') : [];

            const topBtn = document.getElementById('topBtn');

            /* ===== 스크롤: 항상 최상단 이동 ===== */
            function scrollToTop(smooth = true) {
                window.scrollTo({ top: 0, behavior: smooth ? 'smooth' : 'auto' });
            }

            /* ===== 헤더 축소 ===== */
            if (nav && headerEl) {
                const io = new IntersectionObserver((entries) => {
                    entries.forEach(entry => nav.classList.toggle('shrink', !entry.isIntersecting));
                }, { root: null, threshold: 0.8 });
                io.observe(headerEl);
                const rect = headerEl.getBoundingClientRect();
                nav.classList.toggle('shrink', rect.bottom <= 0);
            }

            /* ===== GNB 모바일 메뉴 복제 ===== */
            if (gnb && gnbMobile) gnbMobile.innerHTML = gnb.innerHTML;

            /* ===== 햄버거 & 오버레이 ===== */
            function closeMenu() {
                if (!mobileMenu || !overlay || !hamburger) return;
                mobileMenu.classList.remove('active');
                overlay.classList.remove('active');
                hamburger.classList.remove('active');
                hamburger.setAttribute('aria-expanded', 'false');
                mobileMenu.setAttribute('aria-hidden', 'true');
                overlay.setAttribute('aria-hidden', 'true');
            }

            if (hamburger && mobileMenu && overlay) {
                hamburger.addEventListener('click', function (e) {
                    e.preventDefault();
                    const willOpen = !mobileMenu.classList.contains('active');
                    mobileMenu.classList.toggle('active');
                    overlay.classList.toggle('active');
                    hamburger.classList.toggle('active');
                    hamburger.setAttribute('aria-expanded', String(willOpen));
                    mobileMenu.setAttribute('aria-hidden', String(!willOpen));
                    overlay.setAttribute('aria-hidden', String(!willOpen));
                });
                overlay.addEventListener('click', closeMenu);
            }

            /* ===== 모바일 GNB 아코디언 ===== */
            document.addEventListener('click', function (e) {
                const title = e.target.closest('.gnb-mobile .gnb_title');
                if (!title) return;
                e.preventDefault();
                const li = title.closest('li');
                document.querySelectorAll('.gnb-mobile li.active').forEach(el => {
                    if (el !== li) el.classList.remove('active');
                });
                li.classList.toggle('active');
            });

            /* ===== (수정) 카테고리 탭: 섹션별로만 active 이동 ===== */
            document.querySelectorAll('.Menu_sellect').forEach(section => {
                const list = section.querySelector('.Menu_sellect_warp');
                if (!list) return;
                list.addEventListener('click', (e) => {
                    const li = e.target.closest('li');
                    if (!li) return;
                    e.preventDefault();
                    // 이 섹션 안에서만 active 이동
                    list.querySelectorAll('li').forEach(el => el.classList.remove('active'));
                    li.classList.add('active');
                });
            });

            /* ===== 온라인/오프라인 메뉴 표시 ===== */
            function hideAllMenus() {
                onlineMenus.forEach(menu => menu.style.display = 'none');
                offlineMenus.forEach(menu => menu.style.display = 'none');
            }

            // 섹션 기본 active 보장 (안전망)
            function ensureDefaultActive(sectionSelector, defaultLiSelector) {
                const section = document.querySelector(sectionSelector);
                if (!section) return;
                const list = section.querySelector('.Menu_sellect_warp');
                if (!list) return;
                const hasActive = list.querySelector('li.active');
                if (!hasActive) {
                    const def = list.querySelector(defaultLiSelector);
                    if (def) def.classList.add('active');
                }
            }

            function showOnlineMenu(menuSelector) {
                if (!onlineCategory || !offlineCategory || !onlineMenu || !offlineMenu) return;
                onlineCategory.style.display = 'block';
                offlineCategory.style.display = 'none';
                onlineMenu.style.display = 'block';
                offlineMenu.style.display = 'none';
                hideAllMenus();
                const target = onlineMenu.querySelector(menuSelector);
                if (target) target.style.display = 'flex';
                // 탭 활성 표시
                storeBtns.forEach(b => b.classList.remove('active'));
                const onlineBtn = document.querySelector('.store_sellect_warp .online');
                if (onlineBtn) onlineBtn.classList.add('active');
                // 온라인 기본 active 보장 (cup_menu)
                ensureDefaultActive('.online_category', '.cup_menu');
            }

            function showOfflineMenu(menuSelector) {
                if (!onlineCategory || !offlineCategory || !onlineMenu || !offlineMenu) return;
                onlineCategory.style.display = 'none';
                offlineCategory.style.display = 'block';
                onlineMenu.style.display = 'none';
                offlineMenu.style.display = 'block';
                hideAllMenus();
                const target = offlineMenu.querySelector(menuSelector);
                if (target) target.style.display = 'flex';
                // 탭 활성 표시
                storeBtns.forEach(b => b.classList.remove('active'));
                const offlineBtn = document.querySelector('.store_sellect_warp .offline');
                if (offlineBtn) offlineBtn.classList.add('active');
                // 오프라인 기본 active 보장 (creation_menu)
                ensureDefaultActive('.offline_category', '.creation_menu');
            }

            /* ===== 라우팅: #online / #offline ===== */
            function activateByMode(mode, doScroll = true) {
                if (mode === 'offline') {
                    showOfflineMenu('.creation_menu_list');
                } else {
                    showOnlineMenu('.cup_Icecream_menu'); // 기본 online
                }
                if (doScroll) scrollToTop(true);
            }

            function applyFromHash(doScroll = true) {
                const h = (location.hash || '').toLowerCase();
                activateByMode(h === '#offline' ? 'offline' : 'online', doScroll);
            }

            window.addEventListener('hashchange', () => applyFromHash(true));

            requestAnimationFrame(() => {
                applyFromHash(false);
                scrollToTop(false);
            });

            /* ===== 하단 탭 클릭: 해시 갱신 + 스크롤 ===== */
            storeBtns.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    const mode = btn.classList.contains('offline') ? 'offline' : 'online';
                    const nextHash = `#${mode}`;
                    if (location.hash.toLowerCase() !== nextHash) {
                        history.replaceState(null, '', nextHash);
                    }
                    applyFromHash(true);
                });
            });

            /* ===== 상단 GNB/모바일에서 #online/#offline 클릭 ===== */
            document.addEventListener('click', function (e) {
                const a = e.target.closest('a[href$="#online"], a[href$="#offline"]');
                if (!a) return;
                e.preventDefault();
                const href = a.getAttribute('href');
                const hash = href.slice(href.lastIndexOf('#'));
                history.replaceState(null, '', hash);
                applyFromHash(true);
                closeMenu();
            });

            /* ===== Top 버튼 ===== */
            function onScroll() {
                if (!topBtn) return;
                if (window.scrollY > 250) topBtn.classList.add('visible');
                else topBtn.classList.remove('visible');
            }
            window.addEventListener('scroll', onScroll, { passive: true });
            onScroll();

            if (topBtn) {
                topBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    scrollToTop(true);
                });
            }

        });
    </script>
</body>

</html>